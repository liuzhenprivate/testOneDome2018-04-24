<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WebchatReplyMapper">
	
	
	<!-- 新增-->
	<insert id="save" parameterType="pd">
		insert into TB_WEBCHATREPLY(
			WEBCHAT_ID,	
			KEYWORDS,	
			CONTENT,	
			VALID_HOURS,	
			LOSE_TIME,	
			TYPE,
			CREATE_TIME 
		) values (
			#{WEBCHAT_ID},	
			#{KEYWORDS},	
			#{CONTENT},	
			#{VALID_HOURS},	
			#{LOSE_TIME},
			#{TYPE},	
			#{CREATE_TIME} 
		)
	</insert>
	
	
	<!-- 删除-->
	<delete id="delete" parameterType="pd">
		delete from TB_WEBCHATREPLY
		where 
			WEBCHATREPLY_ID = #{WEBCHATREPLY_ID}
	</delete>
	
	
	<!-- 修改 -->
	<update id="edit" parameterType="pd">
		update  TB_WEBCHATREPLY
			set 
				<if test="KEYWORDS!=null and KEYWORDS!='' ">
				KEYWORDS = #{KEYWORDS},
				</if>
				<if test="CONTENT!=null and CONTENT!='' ">
				CONTENT = #{CONTENT},
				</if>
				<if test="VALID_HOURS!=null and VALID_HOURS!='' ">
				VALID_HOURS = #{VALID_HOURS},
				</if>
				<if test="LOSE_TIME!=null and LOSE_TIME!='' ">
				LOSE_TIME = #{LOSE_TIME},
				</if>
				WEBCHATREPLY_ID = WEBCHATREPLY_ID
			where 
				WEBCHATREPLY_ID = #{WEBCHATREPLY_ID}
	</update>
	
	
	<!-- 通过ID获取数据 -->
	<select id="findById" parameterType="pd" resultType="pd">
		select 
			WEBCHAT_ID,	
			KEYWORDS,	
			CONTENT,	
			VALID_HOURS,	
			LOSE_TIME,	
			TYPE,
			CREATE_TIME,	
			WEBCHATREPLY_ID
		from 
			TB_WEBCHATREPLY
		where 
			WEBCHATREPLY_ID = #{WEBCHATREPLY_ID}
	</select>
	
	
	<!-- 列表 -->
	<select id="datalistPage" parameterType="page" resultType="pd">
		select
				a.WEBCHAT_ID,	
				a.KEYWORDS,	
				a.CONTENT,	
				a.VALID_HOURS,	
				a.LOSE_TIME,	
				a.CREATE_TIME,	
				a.TYPE,
				a.WEBCHATREPLY_ID
		from 
				TB_WEBCHATREPLY a
		where   1=1
				<if test="pd.TYPE!=null and pd.TYPE!='' ">
				and a.TYPE=#{pd.TYPE}
				</if>
				<if test="pd.WEBCHAT_ID!=null and pd.WEBCHAT_ID!='' ">
				and a.WEBCHAT_ID=#{pd.WEBCHAT_ID}
				</if>
				<if test="pd.sendTimeBegin!=null and pd.sendTimeBegin!='' ">
					AND a.CREATE_TIME>=#{pd.sendTimeBegin}
				</if>
				<if test="pd.sendTimeEnd!=null and pd.sendTimeEnd!='' ">
				  <![CDATA[   
					AND a.CREATE_TIME <= #{pd.sendTimeEnd}
				 ]]>   
				</if>
				order by a.WEBCHATREPLY_ID desc
	</select>
	
	<!-- 列表(全部) -->
	<select id="listAll" parameterType="pd" resultType="pd">
		select
				a.WEBCHAT_ID,	
				a.KEYWORDS,	
				a.CONTENT,	
				a.VALID_HOURS,	
				a.LOSE_TIME,	
				a.CREATE_TIME,	
				a.TYPE,
				a.WEBCHATREPLY_ID
		from 
				TB_WEBCHATREPLY a
		where   1=1
				<if test="TYPE!=null and TYPE!='' ">
				and a.TYPE=#{TYPE}
				</if>
				<if test="WEBCHAT_ID!=null and WEBCHAT_ID!='' ">
				and a.WEBCHAT_ID=#{WEBCHAT_ID}
				</if>
				<if test="sendTimeBegin!=null and sendTimeBegin!='' ">
					AND a.CREATE_TIME>=#{sendTimeBegin}
				</if>
				<if test="sendTimeEnd!=null and sendTimeEnd!='' ">
				  <![CDATA[   
					AND a.CREATE_TIME <= #{sendTimeEnd}
				 ]]>   
				</if>
				order by a.WEBCHATREPLY_ID desc
	</select>
	
	<!-- 批量删除 -->
	<delete id="deleteAll" parameterType="String">
		delete from TB_WEBCHATREPLY
		where 
			WEBCHATREPLY_ID in
		<foreach item="item" index="index" collection="array" open="(" separator="," close=")">
                 #{item}
		</foreach>
	</delete>
	
</mapper>